<%- include('layout/mainpage_header') %>
<link rel="stylesheet" href="./purchaseOrderStatement.css">
    <div class="personal-body row">
        <!-- NAVIGATION -->
        <div class="personal-body-navigation col-lg-3">
            <div class="personal-body-navigation-frame">
                <!-- AVATAR -->
                <div class="personal-body-avatar">
                    <div class="personal-body-avatar-frame">
                        <img src="./image/avatar.jpg" alt="" class="personal-body-avatar-img">
                        <div class="personal-body-avatar-name">Ecolink For Life</div>
                    </div>
                    <div class="personal-body-fix-frame">
                        <i class="fa-solid fa-wrench"></i>
                        <a href="/personal" class="personal-body-fix-text">Sửa hồ sơ</a>
                    </div>
                </div>
                <!-- MY ACCOUNT -->
                <div class="personal-body-my-account-frame">
                    <div class="personal-body-my-account-header-frame" id="account-header">
                        <i class="fa-solid fa-user"></i>
                        <div class="personal-body-my-account-text">Tài Khoản Của Tôi</div>
                    </div>
                    <ul class="personal-body-my-account-list" id="account-list" style="display: none;">
                        <li class="personal-body-my-account-item" id="profile">Hồ Sơ</li>
                        <li class="personal-body-my-account-item" id="bank">Ngân Hàng</li>
                        <li class="personal-body-my-account-item" id="address">Địa Chỉ</li>
                        <li class="personal-body-my-account-item" id="password">Đổi Mật Khẩu</li>
                        <li class="personal-body-my-account-item" id="announcement">Cài Đặt Thông Báo</li>
                        <li class="personal-body-my-account-item" id="private">Những Thiết Lập Riêng Tư</li>
                    </ul>
                </div>
                <!-- ORDER -->
                <div class="personal-body-order-frame">
                    <i class="fa-solid fa-bag-shopping"></i>
                    <div class="personal-body-my-account-text nav-active">Đơn Mua</div>
                </div>
                <!-- NOTIFICATION -->
                <div class="personal-body-notification-frame">
                    <div class="personal-body-order-header-frame">
                        <i class="fa-regular fa-bell"></i>
                        <div class="personal-body-my-account-text">Thông Báo</div>
                    </div>
                    <ul class="personal-body-order-list">
                        <li class="personal-body-order-item">Cập Nhật Đơn Hàng </li>
                        <li class="personal-body-order-item">Khuyến mãi</li>
                    </ul>
                </div>
            </div>
        </div>
        <!-- DETAIL -->
        <div class="purchaseOrderStatus-body-detail col-lg-9">
            <div class="purchaseOrderStatus-body-nav">
                <ul class="purchaseOrderStatus-body-nav-list">
                    <li class="purchaseOrderStatus-body-nav-item nav-statetus-active">Tất cả</li>
                    <li class="purchaseOrderStatus-body-nav-item">Chờ thanh toán</li>
                    <li class="purchaseOrderStatus-body-nav-item">Vận chuyển</li>
                    <li class="purchaseOrderStatus-body-nav-item">Chờ giao hàng</li>
                    <li class="purchaseOrderStatus-body-nav-item">Hoàn thành</li>
                    <li class="purchaseOrderStatus-body-nav-item">Đã hủy</li>
                </ul>
            </div>
            <div class="purchaseOrderStatus-body-product-list">
                <% if (orders && orders.length > 0) { %>
                    <% let currentOrder = ''; %>
                    <% orders.forEach(order => { %>
                        <% if (currentOrder !== order.MaDH) { %>
                            <div class="purchaseOrderStatus-body-product-item-header">
                                <div class="purchaseOrderStatus-body-product-shopName">Mã đơn hàng: <%= order.MaDH %></div>
                                <div class="purchaseOrderStatus-body-product-total">Tổng giá trị đơn hàng: <%= order.TongThanhToan %> VND</div>
                            </div>
                            <% currentOrder = order.MaDH; %>
                        <% } %>
                        <div class="purchaseOrderStatus-body-product-item">
                            <div class="purchaseOrderStatus-body-product-item-body">
                                <img src="/product_image/<%= order.HinhChinh %>" alt="<%= order.TenSP %>" class="purchaseOrderStatus-body-product-item-body-img">
                                <div class="purchaseOrderStatus-body-product-item-body-infor">
                                    <div class="purchaseOrderStatus-body-product-item-body-productName"><%= order.TenSP %></div>
                                    <div class="purchaseOrderStatus-body-product-item-body-lable">Phân loại hàng</div>
                                    <div class="purchaseOrderStatus-body-product-item-body-classify">Đen</div>
                                    <div class="purchaseOrderStatus-body-product-item-body-num">x<%= order.SoLuongSP %></div>
                                </div>
                                <div class="purchaseOrderStatus-body-product-item-body-money">
                                    <%= order.DonGia * order.SoLuongSP %> VND
                                    <div class="purchaseOrderStatus-body-product-shipping">Phương thức vận chuyển: <%= order.TenPTVC %></div>
                                    <div class="purchaseOrderStatus-body-product-process">Trạng thái: <%= order.TrangThaiDH %></div>
                                </div>
                            </div>
                        </div>
                    <% }); %>
                <% } else { %>
                    <p>Không có đơn hàng nào.</p>
                <% } %>
            </div>
        </div>
    </div>
    <script>
        /*ĐIỀU HƯỚNG TRẠNG THÁI ĐƠN HÀNG*/
        document.addEventListener("DOMContentLoaded", function () {
            // Lấy tất cả các mục trong danh sách điều hướng
            const navItems = document.querySelectorAll('.purchaseOrderStatus-body-nav-item');

            // Thêm sự kiện click cho từng mục
            navItems.forEach(item => {
                item.addEventListener('click', function () {
                    // Xóa class 'nav-active' khỏi mục đang được chọn
                    document.querySelector('.nav-statetus-active')?.classList.remove('nav-statetus-active');

                    // Thêm class 'nav-active' vào mục vừa được click
                    this.classList.add('nav-statetus-active');
                });
            });
        });

        /*XỬ LÝ SỰ KIỆN CLICK VÀO TÀI KHOẢN THÌ SHOW CÁC CHỨC NĂNG CHI TIẾT*/
        document.getElementById("account-header").addEventListener("click", function() {
            var accountList = document.getElementById("account-list");
            if (accountList.style.display === "none") {
                accountList.style.display = "block";  // Hiển thị danh sách
            } else {
                accountList.style.display = "none";   // Ẩn danh sách
            }
        });

        document.getElementById('profile').addEventListener('click', function() {
            window.location.href = 'http://127.0.0.1:5500/assets/personal.html';
        });
    </script>
</body>
<footer>
    <div class="footer">
        <div class="footer-logo">
            <h1 class="footer-logo-text">ECOLINK FOR LIFE</h1>
        </div>
        <div class="footer-infor">
            <ul class="footer-infor-list">
                <li class="footer-infor-item">About us</li>
                <li class="footer-infor-item">News</li>
                <li class="footer-infor-item">Official Store</li>
                <li class="footer-infor-item">Company</li>
                <li class="footer-infor-item">Careers</li>
            </ul>
        </div>
        <div class="footer-infor">
            <ul class="footer-infor-list">
                <li class="footer-infor-item">Get Help</li>
                <li class="footer-infor-item">FAQ</li>
                <li class="footer-infor-item">Shipping</li>
                <li class="footer-infor-item">Payment</li>
                <li class="footer-infor-item">Returns</li>
                <li class="footer-infor-item">Contact Us</li>
            </ul>
        </div>
        <div class="footer-infor">
            <ul class="footer-infor-list">
                <li class="footer-infor-item">Follow Us</li>
                <li class="footer-infor-item">
                    <i class="fa-brands fa-facebook"></i>
                    <i class="fa-brands fa-instagram"></i>
                    <i class="fa-brands fa-youtube"></i>
                    <i class="fa-brands fa-twitter"></i>
                </li>
            </ul>
        </div>
    </div>
    <div class="footer-year-guide">
        <a href="" class="footer-year-guide-item">Guide</a>
        <a href="" class="footer-year-guide-item">Terms & Conditions</a>
        <a href="" class="footer-year-guide-item">Privacy Policy</a>
    </div>
    <div class="footer-year">
        <i class="fa-regular fa-circle-check"></i>
        2024 ECOLINK. All Rights Reserved
    </div>
</footer>
</html>